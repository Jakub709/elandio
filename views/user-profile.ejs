<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--========== BOX ICONS ==========-->
    <link rel="icon" href="/images/favicon.png" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"
    />

    <!--========== CSS ==========-->
    <link
      rel="stylesheet"
      href="/css/general/generalInner.css
  "
    />
    <link
      rel="stylesheet"
      href="/css/userProfile/userProfile.css
    "
    />
    <style>
      :root {
        --background-profile: <%= userProfile.facultyColor %>;
      }
      .background-profile {
        background-color: var(--background-profile);
      }
    </style>

    <!--========== JQUERY a SWEET ==========-->
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Uživatelský profil</title>
  </head>
  <body>
    <!--========== HEADER ==========-->
    <header class="header">
      <div class="header__container">
        <img src="/images/elandio_logo.png" alt="" class="header__img" />

        <p class="header__logo">Uživatelský profil</p>
        <p class="header__logo__second">
          <i>„Já učím tebe, jiný učí mě.“</i>
        </p>

        <div class="header__toggle">
          <i class="bx bx-menu" id="header-toggle"></i>
        </div>
      </div>
    </header>

    <!--========== NAV ==========-->
    <div class="nav" id="navbar">
      <nav class="nav__container">
        <div>
          <a href="/posts-list" class="nav__link nav__logo">
            <i class="bx bx-world nav__icon"></i>
            <img
              src="/images/elandio_logo_sidebar.png"
              alt=""
              class="header__img"
            />
          </a>

          <div class="nav__list">
            <div class="nav__items">
              <h3 class="nav__subtitle">Příspěvky</h3>

              <a href="/posts-list" class="nav__link">
                <i class="bx bx-task nav__icon"></i>
                <span class="nav__name">Seznam příspěvků</span>
              </a>

              <a href="/my-posts" class="nav__link">
                <i class="bx bx-pencil nav__icon"></i>
                <span class="nav__name">Moje příspěvky</span>
              </a>
            </div>

            <div class="nav__items">
              <h3 class="nav__subtitle">Uživatelé</h3>

              <a href="/users-list" class="nav__link">
                <i class="bx bx-user nav__icon"></i>
                <span class="nav__name">Seznam uživatelů</span>
              </a>
              <div class="nav__dropdown">
                <div class="nav__link">
                  <i class="bx bx-cog nav__icon"></i>
                  <span class="nav__name">Můj profil</span>
                  <i
                    class="bx bx-chevron-down nav__icon nav__dropdown-icon"
                  ></i>
                </div>

                <div class="nav__dropdown-collapse">
                  <div class="nav__dropdown-content">
                    <a href="/my-profile" class="nav__dropdown-item"
                      >Editovat profil</a
                    >
                    <a href="/my-profile-watch" class="nav__dropdown-item"
                      >Zobrazit profil</a
                    >
                    <a href="/bank" class="nav__dropdown-item">Educoiny</a>
                  </div>
                </div>
              </div>
            </div>

            <div class="nav__items">
              <a href="/notifications" class="nav__link">
                <i class="bx bx-bell nav__icon"></i>
                <span class="nav__name">Oznámení</span>
              </a>
              <a href="/messages" class="nav__link">
                <i class="bx bx-message-rounded nav__icon"></i>
                <span class="nav__name">Zprávy</span>
                <span id="messagesBadge"></span>
              </a>
            </div>
          </div>
        </div>

        <a href="/logout" class="nav__link nav__logout">
          <i class="bx bx-log-out nav__icon"></i>
          <span class="nav__name">Odhlásit se</span>
        </a>
      </nav>
    </div>

    <!--========== CONTENTS ==========-->
    <main>
      <div class="account-page">
        <div class="container">
          <div class="profile-header background-profile">
            <div class="profile-img">
              <img src="<%= userProfile.profilePic %>" alt="Profile Image" />
            </div>
            <div class="profile-nav-info">
              <h3 class="user-name"><%= userProfile.name %></h3>
              <div class="address">
                <span id="country" class="country"
                  >@<%= userProfile.username %></span
                >
              </div>
            </div>
            <div class="profile-option">
              <div class="notification">
                <i class="fa fa-bell"></i>
                <span class="alert-message"></span>
              </div>
            </div>
          </div>

          <div class="main-bd">
            <div class="left-side">
              <div class="profile-side">
                <h3><%= userProfile.faculty %></h3>
                <p class="profile-side-position">
                  <%= userProfile.fieldOfStudy %>
                </p>
                <p class="profile-side-position"><%= userProfile.region %></p>
                <div class="social-buttons">
                  <a
                    href="http://www.facebook.com/<%= userProfile.facebook %>"
                    class="social-buttons__button social-button social-button--facebook"
                    aria-label="Facebook"
                    target="_blank"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 512 512"
                    >
                      <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                      <path
                        d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"
                      />
                    </svg>
                  </a>
                  <a
                    href="http://www.linkedin.com/<%= userProfile.linkedin %>"
                    class="social-buttons__button social-button social-button--linkedin"
                    aria-label="LinkedIn"
                    target="_blank"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 448 512"
                    >
                      <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                      <path
                        d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
                      />
                    </svg>
                  </a>
                  <a
                    href="https://instagram.com/<%= userProfile.instagram %>"
                    class="social-buttons__button social-button social-button--instagram"
                    aria-label="Instagram"
                    target="_blank"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 448 512"
                    >
                      <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                      <path
                        d="M224,202.66A53.34,53.34,0,1,0,277.36,256,53.38,53.38,0,0,0,224,202.66Zm124.71-41a54,54,0,0,0-30.41-30.41c-21-8.29-71-6.43-94.3-6.43s-73.25-1.93-94.31,6.43a54,54,0,0,0-30.41,30.41c-8.28,21-6.43,71.05-6.43,94.33S91,329.26,99.32,350.33a54,54,0,0,0,30.41,30.41c21,8.29,71,6.43,94.31,6.43s73.24,1.93,94.3-6.43a54,54,0,0,0,30.41-30.41c8.35-21,6.43-71.05,6.43-94.33S357.1,182.74,348.75,161.67ZM224,338a82,82,0,1,1,82-82A81.9,81.9,0,0,1,224,338Zm85.38-148.3a19.14,19.14,0,1,1,19.13-19.14A19.1,19.1,0,0,1,309.42,189.74ZM400,32H48A48,48,0,0,0,0,80V432a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V80A48,48,0,0,0,400,32ZM382.88,322c-1.29,25.63-7.14,48.34-25.85,67s-41.4,24.63-67,25.85c-26.41,1.49-105.59,1.49-132,0-25.63-1.29-48.26-7.15-67-25.85s-24.63-41.42-25.85-67c-1.49-26.42-1.49-105.61,0-132,1.29-25.63,7.07-48.34,25.85-67s41.47-24.56,67-25.78c26.41-1.49,105.59-1.49,132,0,25.63,1.29,48.33,7.15,67,25.85s24.63,41.42,25.85,67.05C384.37,216.44,384.37,295.56,382.88,322Z"
                      />
                    </svg>
                  </a>
                </div>
                <div class="profile-btn">
                  <a
                    href="/messages/<%= userProfile._id %>"
                    class="chatbtn btn-blue <%= loggedinUserEqualsClicked%>"
                    id="chatBtn"
                  >
                    <i class="fa fa-comment"></i>Zpráva
                  </a>
                  <a
                    href="/follow/<%= userProfile._id %>"
                    class="createbtn btn-blue <%= follow %> <%= loggedinUserEqualsClicked%>"
                    id="followBtn"
                  >
                    <i class="fa fa-plus"></i>Sledovat
                  </a>
                  <a
                    href="/unfollow/<%= userProfile._id %>"
                    class="createbtn btn-blue-border <%= unfollow %>"
                    id="unfollowBtn"
                  >
                    <i class="fa fa-plus"></i>Nesledovat
                  </a>
                </div>
                <div class="user-bio">
                  <h3>O mně</h3>
                  <p class="bio"><%= userProfile.about %></p>
                </div>
              </div>
            </div>
            <div class="right-side">
              <div class="nav-profile">
                <ul>
                  <li onclick="tabs(0)" class="user-demand-supply active">
                    Příspěvky
                  </li>
                  <li onclick="tabs(1)" class="user-followers">
                    Sledující (<%= followersNumber %>)
                  </li>
                  <li onclick="tabs(2)" class="user-following">
                    Sledovaní (<%= followingsNumber %>)
                  </li>
                </ul>
              </div>
              <div class="profile-body">
                <div class="profile-demand-supply tab">
                  <% posts.forEach(function(post) { %>
                  <div class="my-post">
                    <div>
                      <div class="my-post-body">
                        <h4><%= post.title%></h4>
                        <p class="date"><%= post.time%></p>
                        <p class="my-post-content"><%= post.content %></p>
                      </div>
                    </div>

                    <div class="my-post-about">
                      <div class="my-post-tags grid grid--3-cols">
                        <span class="tag tag-one"><%= post.type %></span>
                        <span class="tag tag-one"><%= post.category %></span>
                        <span class="tag tag-two"><%= post.level %></span>
                        <span class="tag tag-two"><%= post.group %></span>
                        <span class="tag tag-two"><%= post.environment %></span>
                        <span class="tag tag-three"><%= post.price %> EC</span>
                      </div>
                    </div>
                  </div>
                  <% }); %>
                </div>
                <div class="profile-followers tab">
                  <% followers.forEach(function(follower) { %>
                  <div class="follow-tab grid grid--3-cols-follow">
                    <img
                      src="<%= follower.profilePic%>"
                      alt=""
                      class="follow__img"
                    />
                    <a class="tab-link" href="/user-profile/<%=follower._id%>"
                      ><b><%= follower.name%></b></a
                    >
                    <p><%= follower.faculty %></p>
                  </div>
                  <% }); %>
                </div>
                <div class="profile-following tab">
                  <% followings.forEach(function(following) { %>
                  <div class="follow-tab grid grid--3-cols-follow">
                    <img
                      src="<%= following.profilePic%>"
                      alt=""
                      class="follow__img"
                    />
                    <a class="tab-link" href="/user-profile/<%=following._id%>"
                      ><b><%= following.name%></b></a
                    >
                    <p><%= following.faculty %></p>
                  </div>
                  <% }); %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!--========== MAIN JS ==========-->
    <script src="/js/userProfile.js"></script>
    <script src="/js/commonLoggedIn.js"></script>
  </body>
</html>
